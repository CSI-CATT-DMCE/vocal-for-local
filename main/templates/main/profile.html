{% load static %}
<!DOCTYPE html>
<html>

<head>
  <title>{% block title %} Profile {% endblock %}</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
  <link rel="stylesheet" type="text/css" href="{%static '/css/profile.css' %}" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css"
    integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous" />
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>

</head>

<body style="background-color: #0a043c;">
  <div class="topnav">
    <a class="active" href="{% url 'home' %}">
      <img id="logo" src="{% static 'images/logo.png' %}" alt="VocalForLocal" />
    </a>
    <div class="search">
      <input type="text" placeholder=" Search..." name="key" id="search-placeholder" />
            <button id="srch" type="submit" onclick="validatePlaceHolder(this)">
                <i class="fa fa-search" style="font-size: 18px"> </i>
            </button>
    </div>
    <span class="hello-msg">
      Hello, {% if user.is_authenticated %} {{request.user}} {% else %} User
      {% endif %}
    </span>
    {% if user.is_authenticated %}
    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false"          style="margin-left: 160px;">
      <i class="far fa-user-circle" style="color:#0a043c; font-size: 45px;"></i>
    </a>
    <ul class="dropdown-menu" aria-labelledby="navbarDropdown" style="border-radius: 10px;margin-left: 160px;">
      <li><a class="dropdown-item" href="{% url 'home' %}"><i class="fas fa-home" style="font-size: 17px; margin-right: 5px;"></i>Home</a></li>
      <li><a class="dropdown-item" href="{% url 'logout' %}"><i class="fas fa-sign-out-alt" style="font-size: 17px; margin-right: 5px;"></i>Logout</a></li>
    </ul>
    {% endif %}
  </div>

  <div class="menu-bar">
    <ul>
      <li>
        <form method="POST" action='/home/'>
          {% csrf_token %}
        <i class="fa fa-list-alt" aria-hidden="true" style="font-size: 18px; padding-right: 8px; color: white"></i>
          <select name="location" class="custom-select" style="width: 200px; height: 38px;">
            <option selected value= "0">Location</option>
            <option value="1">Andhra Pradesh</option>
            <option value="2">Arunachal Pradesh</option>
            <option value="3">Assam</option>
            <option value="4">Bihar</option>
            <option value="5">Chhattisgarh</option>
            <option value="6">Goa</option>
            <option value="7">Gujarat</option>
            <option value="8">Haryana</option>
            <option value="9">Himachal Pradesh</option>
            <option value="10">Jammu & Kashmir</option>
            <option value="11">Jharkhand</option>
            <option value="12">Karnataka</option>
            <option value="13">Kerala</option>
            <option value="14">Madhya Pradesh</option>
            <option value="15">Maharashtra</option>
            <option value="16">Manipur</option>
            <option value="17">Meghalaya</option>
            <option value="18">Mizoram</option>
            <option value="19">Nagaland</option>
            <option value="20">Odisha</option>
            <option value="21">Punjab</option>
            <option value="22">Rajasthan</option>
            <option value="23">Sikkim</option>
            <option value="24">Tamil Nadu</option>
            <option value="25">Telangana</option>
            <option value="26">Tripura</option>
            <option value="27">Uttar Pradesh</option>
            <option value="28">Uttarakhand</option>
            <option value="29">West Bengal</option>
          </select>

          <select name="category-option" class="custom-select" style="width: 200px; height: 38px;">
            <option selected value="0">Category</option>
            <option value="Accessories">Accessories</option>
            <option value="Art">Art</option>
            <option value="Clothing">Clothing</option>
            <option value="Electronics">Electronics</option>
            <option value="Food Items">Food Items</option>
            <option value="Handicraft">Handicraft</option>
            <option value="Home Decor">Home Decor</option>
            <option value="Others">Others</option>
          </select>

          <span style="padding-right: 15px;">
            
            <select name="availability-option" class="custom-select" style="width: 200px; height: 38px;">

              <option selected value= "0">Shipping</option>
              <option value="Local">Local</option>
              <option value="Span-India">Span-India</option>
              <option value="Global">Global</option>

            </select>
          </span>
          <button class="btn btn-outline-secondary" type="submit" name="filter-btn" style="border: 1px solid ;color:
            white;font-weight: bold;">
            <i class="fas fa-filter" style="font-size: 18px; padding-right: 8px; color: white"></i>Filter
          </button>
        </form>
      </li>
      <li style="margin-top: 20px; border: none;">
        <i class="fa fa-info-circle" style="font-size: 18px; padding-right: 2px; color: white">
        </i>
        <button class="home-about">
          <a class="active" href="{% url 'about' %}" style="text-decoration: none;">About</a>
        </button>
      </li>
    </ul>
  </div>
  {% if user.is_authenticated %}
  <a class="fixedButton" href="{% url 'upload' %}">
    <div class="roundedFixedBtn"><i class="fa fa-plus"></i></div>
  </a>
  {% endif %}
  {% if user.is_authenticated %}
  <div class="center">
    <div class="card">
      <div id="edt-frm" class="additional">
        <div class="user-card">
          <div class="level center">
            <h1>PROFILE</h1>
          </div>
          <div class="icon">
            <img id="profile-logo" src="{% static 'images/profile.PNG' %}" alt="profile-logo">
          </div>
        </div>
        <div class="more-info">
          <h1>EDIT</h1>
          <div class="edit-form">
            {% load crispy_forms_tags %}
            <form method="post" action="/profile/">
              {% csrf_token %}
              <div class="form-row">
                <div class="form-group col-lg-5 mb-1">
                  {{form.u_name|as_crispy_field}}
                </div>
                <div class="form-group col-lg-5 mb-1">
                  {{form.business_name|as_crispy_field}}
                </div>
              </div>
              <div class="form-row">
                <div class="form-group col-lg-5 mb-1">
                  {{form.email|as_crispy_field}}
                </div>
                <div class="form-group col-lg-5 mb-1">
                  {{form.phone|as_crispy_field}}
                </div>
              </div>
              <div class="form-row">
                <div class="form-group col-lg-5 mb-1">
                  {{form.state|as_crispy_field}}
                </div>
                <div class="form-group col-lg-5 mb-1">
                  {{form.city|as_crispy_field}}
                </div>
                <div class="form-group col-lg-5 mb-1">
                  {{form.postal_code|as_crispy_field}}
                </div>
              </div>
              <div class="form-row">
                <div class="form-group col-lg-5 mb-4">
                  {{ form.address|as_crispy_field }}
                </div>
              </div>

              <button class="save-btn" type="submit" , name='save' style="border-radius: 30px;">Save</button>
              <button class="save-btn" type="reset" , name='save' style="border-radius: 30px; margin-left: 20px;background:linear-gradient(159deg, #33ccff, #b38ed1) ;" onclick='document.getElementById("edt-frm").style.width = "300px";'>Reset</button>
            </form>
          </div>
        </div>
      </div>
      {% if user.is_authenticated %}
      <div class="general" style="overflow:hidden">
        <h1 style="color: #354152; text-transform: capitalize; margin-top: -10px;">{{request.user}}</h1>
        <p>
          <ul style="list-style-type: none; font-size: 17px; color: #354152; font-weight: 600; line-height: 50px; margin-left: -10px; background-color: rgb(230, 230, 230); border-radius: 10px;">
            <li><span style="font-size: 20px; font-weight: bold;">Name:  </span>{{user_profile.name}}</li>
            <li><span style="font-size: 20px; font-weight: bold;">Business Email: </span>{{user_profile.email}}</li>
            <li><span style="font-size: 20px; font-weight: bold;">Phone:  </span>{{user_profile.phone}}</li>
            <li><span style="font-size: 20px; font-weight: bold;">Business name:  </span>{{user_profile.business_name}}</li>
            <li><span style="font-size: 20px; font-weight: bold;">State:  </span>{{user_profile.state}}</li>
            <li><span style="font-size: 20px; font-weight: bold;">City:  </span>{{user_profile.city}}</li>
            <li><span style="font-size: 20px; font-weight: bold;">Postal code:  </span>{{user_profile.postal_code}}</li>
            <li><span style="font-size: 20px; font-weight: bold; vertical-align: top; ">Address:  </span>
              <div style="display: inline-block ;width: 300px;height: 35px; word-wrap: break-word; overflow-y: scroll;">{{user_profile.address}}</div></li>
          </ul>
        </p>
        <div id="edt">
            <button id="edt-btn" onclick="edit()">Edit</button>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
  </div>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <div>
    <hr style="width: 80%; height: 0.5px; background-color: white;">
    <h2 style="font: verdana; margin-left: 50px; color: white;">POSTS</h2>
    <br>
    {% if user_posts %}
    <div class="card-container">
      {% for p in user_posts %}
      <div class="cards">
        <header class="article-header">
          <a href = "{%url  'viewPost' business=p.business_name name=p.name %}">
          <div style="width: 300px; height: 270px; margin-top: 18px; padding-right: 20px; 
               border-right: solid rgb(216, 214, 214) 2px; background-image: url({{p.imageURL}}); 
               background-position: center; background-size: cover;">
          </div>
          </a>
        </header>
        <div class="author" style="color: white; margin-left: 320px; width: 350px; height: 100%; margin-top: -290px; padding: 5px;" >
          <div class="profile" style="width: 100%; height: fit-content; margin-top: 10px; font-size: 17px; font-weight: bold;">
            <span style="font-size: 25px;">{{p.name}}</span> 
            <p style="font-weight: normal; color: #c4c0c0;">{{p.date_created}}<span class="price" style = "float: right; font-weight: bold;margin-right: 20px;font-size: 20px;color: white;">&#8377;{{p.price}}</span></p></div>
          <hr style="width: 80%; background-color: whitesmoke; margin: 5px 0px;">
          <div class="info">
            <div class="caption" style="font-size: 17px; font-weight: bold;">Description: </div>
            <div class="name" style="overflow-x: hidden; display: flex; flex-direction: row;flex-wrap: wrap; font-family: Verdana, Geneva, Tahoma, sans-serif;">
              {{p.description}}
            </div>
            <button id='delete-btn' type="submit" name="{{p.p_id}}">
              <a href="{% url 'delete_post' %}?p_id={{p.p_id}}" style="text-decoration: none; color: white;">DELETE</a>
            </button>
          </div>
        </div>
      </div>
    {% endfor %}
    </div>
    {% else %}
      <div style="width: 900px; height: 550px;background: url('/static/images/def_post.PNG') no-repeat; margin: 1px  420px;">
      </div>
    {% endif %}
  </div>
  {% endif %}
  <br>
  <br>
  <div class="footer" style="padding-left: 10px;">
    <hr style="width:100%; height: 0.5px; background-color: white;"/>
    <h3 style="color: white;">Contact us at: <span style="margin:0px 5px;"><i class="fab fa-facebook"></i></span> 
      <span style="margin:0px 5px;"><i class="fab fa-instagram"></i></span><span style="margin:0px 5px;"><i class="fab fa-twitter"></i></span> 
      <div><span style="font-size: 18px;"> </span></div>
  </div>
  <script>
    function edit(){
         document.getElementById("edt-frm").style.width="100%";
    }
 </script>
 <script>
  function validatePlaceHolder() {
      var input = document.getElementById("search-placeholder").value
      if (input != "") {
          console.log(input)
          a = "{% url 'search' key='x' %}".replace('x', input)
          console.log(a);
          document.location.href = (a);
      }
  };
</script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
</body>

</html>